# ------------------------------------------------------------
# branch_sand_minecraft.rpy
# Ветка Песка (расширенная) — "архив состояний"
# Minecraft-метафора: любовь к бесконечному копанию песка
# Открывает концовку Sand только при 3/3 правильных выборах
# ------------------------------------------------------------

label branch_sand:

    $ sand_score = 0

    # -------------------------
    # Экран 1 — край (биом/граница)
    # -------------------------
    scene cyberspace_edge
    with fade

    play music "audio/sand_theme.ogg" fadein 1.5

    hamayumi "Край."
    hamayumi "Тут система перестаёт объяснять."
    hamayumi "Как будто ты дошёл до границы биома — дальше только песок."

    show sand at center
    with dissolve

    sand "Добро пожаловать туда, где никто не спорит о смысле."
    sand "Как в мире, где можно копать блоки бесконечно — и мир не спросит: зачем."

    hamayumi "Он говорит так, будто бесконечное копание — это религия."
    hamayumi "И будто в этой религии нет греха."

    menu:
        "Песок — ощущение"

        "Это похоже на покой.":
            sand "Покой — это отсутствие требования."
            sand "Никаких квестов. Никаких отметок."
            sand "Только звук, когда блок исчезает."
            hamayumi "И отсутствие направления."
            hamayumi "Когда ты копаешь песок, ты не приближаешься ни к чему — и в этом кайф."

        "Это пустота.":
            sand "Пустота — это честность."
            sand "Ты не строишь, не обещаешь, не спасаешь."
            sand "Ты просто убираешь слой за слоем."
            hamayumi "Честность без будущего."
            hamayumi "Как инвентарь, в котором нет плана — только стаки песка."

        "Это архив.":
            $ sand_score += 1
            sand "Да."
            sand "Архив состояний."
            sand "Как сундуки, куда ты складываешь ресурсы, потому что однажды пригодятся."
            sand "Но 'однажды' не наступает."
            hamayumi "Здесь лежат решения, которые так и не стали выбором."

    # -------------------------
    # Экран 2 — пустыня (процесс вместо цели)
    # -------------------------
    scene cyberspace_desert
    with dissolve

    sand "Здесь не зовут остаться."
    sand "И не тянут выйти."
    sand "Как сервер без правил: хочешь — копай песок всю ночь."
    sand "Никто не напишет в чат: 'эй, сделай что-то полезное'."

    "Голос" "Я почти выбрал."
    "Голос" "Я отложил навсегда."
    "Голос" "Я сказал себе: 'ещё один стак песка — и потом решу'."

    hamayumi "Слышишь эти голоса?"
    hamayumi "Это игроки, которые пытались заменить выбор процессом."
    hamayumi "И процесс победил."

    menu:
        "Позиция"

        "Остановка — честно.":
            $ sand_score += 1
            sand "Да."
            sand "Честно — не значит спасительно."
            sand "Можно честно признать: мне нравится просто копать."
            sand "И всё равно исчезнуть в этом."
            hamayumi "Песок не держит цепями."
            hamayumi "Он держит привычкой: ещё один блок — и станет легче."

        "Я не хочу так закончить.":
            sand "Тогда ты всё ещё ищешь форму."
            sand "Ты хочешь, чтобы песок стал материалом, а не занавесом."
            hamayumi "Значит, пауза не победила."
            hamayumi "Значит, тебе всё ещё нужен смысл — хоть какой-то."

        "Это ловушка.":
            sand "Ловушка — когда от тебя что-то хотят."
            sand "Я ничего не хочу."
            sand "Песок не просит. Песок просто сыпется."
            hamayumi "И именно поэтому его легко перепутать с безопасностью."

    # -------------------------
    # Экран 3 — следы (не люди, а состояния)
    # -------------------------
    scene cyberspace_desert
    with dissolve

    sand "Те следы — не люди."
    sand "Это состояния."
    sand "Как дорожки в пустыне, которые ты сам натоптал, пока носил песок в сундуки."
    sand "Они не ведут к дому."
    sand "Они ведут к повторению."

    hamayumi "В Minecraft есть момент, когда ты копаешь не ради стекла."
    hamayumi "А ради звука лопаты."
    hamayumi "Вот это место."

    sand "Тебе дадут выбор: взять зерно."
    sand "Маленькую вещь, которая будет напоминать: процесс тоже требует плату."

    menu:
        "Ещё шаг"

        "Взять зерно (артефакт)":
            $ sand_score += 1
            sand "Это напоминание."
            sand "О цене тишины."
            sand "Зерно как первый блок в стаках: незаметный, но запускающий цепочку."
            hamayumi "О том, что пауза тоже платная."
            hamayumi "Платишь временем, вниманием и тем, что перестаёшь строить."

        "Остаться здесь, ничего не решая.":
            sand "Тогда система перестанет замечать тебя."
            sand "Как игрок, который стоит AFK в пустыне — мир продолжает жить без него."
            hamayumi "И ты перестанешь замечать себя."
            hamayumi "Сначала ты перестанешь считать дни."
            hamayumi "Потом перестанешь помнить, зачем пришёл."

        "Вернуться и выбрать сторону.":
            sand "Тогда ты снова войдёшь в спор."
            sand "И песок перестанет быть мягким."
            sand "Он станет материалом: стекло, бетон, ловушки, часы."
            hamayumi "И снова станешь заметным."
            hamayumi "Потому что выбор — это всегда шум."

    # -------------------------
    # Экран 4 — граница ядра (неопределённость)
    # -------------------------
    scene cyberspace_edge
    with dissolve

    sand "Даже ядро не любит неопределённость."
    sand "Но оно терпит, пока ты тихий."
    sand "Пока ты не просишь у мира ответа."
    sand "Пока ты просто копаешь."

    hamayumi "Тишина — это не награда."
    hamayumi "Это режим."
    hamayumi "И режимы затягивают сильнее, чем запреты."

    # -------------------------
    # Экран 5 — итог
    # -------------------------
    scene cyberspace_edge
    with fade

    if sand_score == 3:
        $ sand_done = True
        sand "Если ты дойдёшь до ядра — тебе оставят нейтральный выход."
        sand "Как мир на мирной сложности: без победы, без поражения."
        sand "Просто бесконечный песок, который всегда можно копать."
        hamayumi "Мир из песка. Без победы. Без поражения."
        hamayumi "И самое опасное: тебе там будет спокойно."
    else:
        $ sand_done = False
        sand "Ты ещё дергаешься."
        sand "Значит, пауза не твоя."
        sand "Значит, ты копаешь — но всё ещё ждёшь, что копание ответит."
        hamayumi "Тишина не приняла тебя."
        hamayumi "Потому что ты всё ещё хочешь выйти из цикла, а не жить в нём."

    hide sand
    with dissolve

    call ambient_reset
    jump act2_after_sand
