# ------------------------------------------------------------
# endings.rpy
# Финалы - ТОЛЬКО отображение результата
# Логика выбора полностью находится в scenes_core.rpy
# Здесь нет принятия решений, только рендер финального состояния
# ------------------------------------------------------------

label endings_entry:

    scene bg black
    with fade

    if final_state == "quins":
        jump end_quins
    elif final_state == "nighstess":
        jump end_nighstess
    elif final_state == "sand":
        jump end_sand
    elif final_state == "hospital":
        jump end_hospital
    elif final_state == "virus":
        jump end_virus
    else:
        jump end_default


# ------------------------------------------------------------
# QUINS - выход (переписанная сцена: тепло, радость, поддержка)
# ------------------------------------------------------------
label end_quins:

    play music "audio/music/best_End.mp3" fadein 2.0 loop volume 0.008

    scene bg cyberspace_city
    with fade

    show quins at center

    "Город впервые не давит."
    "Он будто выдыхает вместе с тобой."

    quins "Пора домой."

    oliver "Я выбираю... идти."
    oliver "Не убегать."
    oliver "И не зависать."


    "Экран ровный."
    "Без помех."
    "Без скрытых смыслов."

    oliver "Смотри."
    oliver "Он больше не мигает."

    quins "Значит, ты не споришь с реальностью."
    quins "Ты с ней синхронизировался."

    with dissolve
    scene bg quinsno

    "Ты обнимаешь Quins."
    "Не крепко - уверенно."
    "Как говорят: «мы справились»."

    quins "Ха..."
    quins "Знаешь, я давно не чувствовала это."
    quins "Когда всё... просто нормально."

    oliver "Это даже странно."
    oliver "Когда хорошо - и не надо за это платить."

    quins "Надо."
    quins "Ответственностью."
    quins "Но ты её уже взял."


    "Ты подхватываешь Quins на руки."
    "Не потому что она не может идти."
    "А потому что сейчас - можно."

    scene bg quins
    with dissolve

    quins "Эй!"
    quins "Я вообще-то лёгкий только метафорически."

    oliver "Знаю."
    oliver "Просто... сегодня я сильнее, чем был."

    quins "Тогда неси."
    quins "Но аккуратно."

    "Вы смеётесь."
    "Смех не отражается эхом."
    "Он настоящий."

    "Город меняется."
    "Не рушится."
    "А теряет лишнее."

    "Вывески гаснут."
    "Шум исчезает."
    "Остаётся путь."

    quins "Видишь?"
    quins "Киберспейс не против выхода."
    quins "Он против бегства."

    oliver "А я не бегу."
    oliver "Я возвращаюсь."

    "Под ногами - тонкая линия."
    "Не указатель."
    "След."

    quins "Вот она."
    quins "Домой - это не место."
    quins "Это состояние."

    scene black
    with fade

    "Ты делаешь шаг."
    "Потом ещё один."
    "С каждым шагом становится легче дышать."


    quins "Мне спокойно."
    quins "Потому что ты больше не просишь, чтобы за тебя решили."

    oliver "И тебе не нужно держать дверь."

    quins "Да."
    quins "Я просто иду рядом."

    "Щелчок."
    "Не как финал."
    "Как сохранение."

    oliver "Я здесь."
    oliver "И мне... хорошо."

    quins "Вот и всё."
    quins "Без драм."
    quins "Без ловушек."


    "Мир снова требует усилий."
    "Но теперь это - нормальные усилия."

    "Концовка: Моя любовь с Quins."

    return



# ------------------------------------------------------------
# NIGHSTESS - принятие (расширенная сцена: эскапизм как выбор)
# ------------------------------------------------------------
label end_nighstess:

    play music "audio/music/nightass_End.mp3" fadein 2.0 loop volume 0.008

    scene bg cyberspace_tunnel
    with fade

    show nighstess at center
    nighstess "Добро пожаловать не в тюрьму."
    nighstess "А в устойчивую форму."

    show hamayumi at left
    voice "audio/Hamayumi/final/1.mp3"
    hamayumi "Ты понимаешь цену?"

    oliver "Понимаю."
    oliver "И принимаю."
    oliver "Без попытки выйти обратно."

    hide hamayumi
    nighstess "Тогда слушай внимательно."
    nighstess "Здесь ты не тело."
    nighstess "Не диагноз."
    nighstess "Не ошибка среды."

    nighstess "Здесь ты - процесс."
    nighstess "И процесс может быть чем угодно."

    scene bg cyberspace_city
    with dissolve

    "Город перестраивается."
    "Не под правила."
    "Под ритм."

    "Музыка течёт по улицам."
    "Окна вспыхивают цветами."
    "Башни пульсируют, как сцена."

    oliver "Вау..."
    oliver "Это что, вечеринка?"

    show nighstess at left
    nighstess "Это ты перестал сдерживать форму."
    nighstess "Теперь можно просто быть."

    "Ты смеёшься."
    "Тело не устаёт."
    "Мысли не тормозят."

    "Ты бежишь по крышам."
    "Прыгаешь."
    "Падаешь - и не падаешь."

    oliver "Я могу быть кем угодно!"
    oliver "Героем!"
    oliver "Злодеем!"
    oliver "NPC с идиотской репликой!"
    oliver "Блять НЕЙРОСЕТЬЮ"
    oliver "ЭТО ЛУЧШИЙ МИР!"

    nighstess "Можешь."
    nighstess "И ни одно из этих состояний не навсегда."
    nighstess "Кроме выбранного."

    scene bg cyberspace_city
    with dissolve

    "Свет."
    "Шум."
    "Толпа из аватаров, которые не задают вопросов."

    "Ты танцуешь."
    "Не потому что надо."
    "А потому что можно."

    oliver "Тут так просто..."
    oliver "Никто не спрашивает, почему."

    nighstess "Потому что здесь не лечат."
    nighstess "И не спасают."
    nighstess "Здесь живут."

    "Истории запускаются одна за другой."
    "Ты - в квесте."
    "Ты - в легенде."
    "Ты - в симуляции, где всё получается."

    scene bg cyberspace_city
    with fade

    "Время перестаёт давить."
    "Будущее не требует объяснений."
    "Прошлое не тянет назад."

    oliver "Я остаюсь."
    oliver "И мне хорошо."

    show nighstess at center
    nighstess "Это и есть принятие."
    nighstess "Не бегство."
    nighstess "А выбор формы."

    scene black
    with fade

    "Ты больше не ищешь выход."
    "Ты настраиваешь мир под себя."

    "Концовка: Осознанный киберспейс."

    return



# ------------------------------------------------------------
# SAND - пауза (расширенная сцена: растворение в нейтральном покое)
# Используются фоны:
#  - sand1..sand4  : постепенное засыпание ядра песком
#  - sand5..sand7  : бесконечное копание плоского мира песка (майнкрафт)
# ------------------------------------------------------------
label end_sand:

    play music "audio/music/sand_End.mp3" fadein 2.0 loop volume 0.008

    scene bg cyberspace_core
    with fade

    show sand at center
    sand "Ты не выиграл."
    sand "И не проиграл."

    show hamayumi at left
    voice "audio/Hamayumi/final/2.mp3"
    hamayumi "Тогда просто... будь."

    oliver "Это значит..."
    oliver "Мне больше не нужно решать?"

    sand "Да."
    sand "Никаких веток."
    sand "Никаких финалов."
    sand "Только процесс."

    # --- Засыпание ядра песком (sand1..sand4) ---
    scene bg sand1
    with dissolve
    "Песок появляется сначала как ошибка текстуры."
    "Тонкой крошкой по краям интерфейса."

    scene bg sand2
    with dissolve
    "Он ложится ровнее."
    "Как слой, который никто не отменил."

    scene bg sand3
    with dissolve
    "Ядро ещё видно."
    "Но уже будто под стеклом."
    "Под толщей мягкой пыли."

    scene bg sand4
    with dissolve
    "Песок закрывает кнопки."
    "Закрывает надписи."
    "Закрывает сам вопрос."

    oliver "Ха."
    oliver "Это буквально мой любимый биом."

    sand "Покой выглядит именно так."
    sand "Когда даже ядро перестаёт требовать ответ."

    # --- Плоский мир и копание (sand5..sand7) ---
    scene bg sand5
    with fade
    "Мир выравнивается."
    "Рельеф исчезает."
    "Остаётся плоскость."

    "Песок."
    "Песок."
    "И ещё песок."

    "В рамке лежит лопата"
    "Обычная."
    "Первая."

    "Ты копаешь."
    "Шурх."
    "Шурх."
    "Шурх."

    scene bg sand6
    with dissolve
    "Инвентарь заполняется стаками песка."
    "Один."
    "Два."
    "Десять."

    oliver "Можно просто..."
    oliver "Копать вечно?"

    sand "Можно."
    sand "Никто не напомнит, зачем ты начал."
    sand "Никто не спросит, что ты построишь."

    "Лопата ломается."
    "Вторая."
    "Третья."
    "Сотая."

    "Миллионы сломанных лопат."
    "И ни одной ошибки."

    scene bg sand7
    with dissolve
    "Горизонт не приближается."
    "Он всегда на одинаковом расстоянии."

    "Ночь..."
    "Тишина становится правилом."
    "А правило - привычкой."

    oliver "Тут так... тихо."
    oliver "Даже внутри."

    sand "Пауза не лечит."
    sand "Она стирает трение."
    sand "Когда нет трения - нет боли."
    sand "И нет движения."

    "Ты продолжаешь копать."
    "Не быстрее."
    "И не медленнее."

    "Время больше не считается."
    "Счётчик дней не появляется."
    "Солнце не встаёт и не садится."

    "Ты копаешь."
    "Даже когда лопаты больше нет."
    "Даже когда руки не ощущаются."

    scene black
    with fade

    "Мир не ускоряется."
    "И не ждёт."

    "Ничто не требует продолжения."
    "И ничто не заканчивается."

    "Концовка: Мир из песка."

    return


# ------------------------------------------------------------
# HOSPITAL - нормализация (расширенная сцена: стабильность ценой альтернатив)
# ВАЖНО: здесь НЕТ киберспейса, НЕТ ПК, НЕТ игр - только реальность
# ------------------------------------------------------------
label end_hospital:

    play music "audio/music/durka_End.mp3" fadein 2.0 loop volume 0.008

    scene bg hospital_room
    with fade

    "Белый свет не давит."
    "Он просто есть."

    oliver "Белый свет."
    oliver "Стабильность."

    show nurse1 at right
    nurse "Вы больше не говорите о киберспейсе."

    oliver "Потому что он больше не нужен."
    oliver "Теперь всё... обычное."

    nurse "Это хороший знак."
    nurse "Рутина помогает восстановлению."

    hide nurse1
    with dissolve

    "Утро начинается одинаково."
    "Подъём."
    "Осмотр."
    "Завтрак."

    "Пластиковый поднос."
    "Тёплая каша."
    "Вкус без оттенков."

    "Ничего не мигает."
    "Ничего не спорит."
    "Ничего не зовёт."

    scene bg hospital_corridor
    with dissolve

    "Коридор длинный."
    "Линолеум ровный."
    "Шаги звучат одинаково каждый день."

    "Люди проходят мимо."
    "Не знакомятся."
    "Не задерживаются."

    oliver "Иногда кажется..."
    oliver "Что раньше было больше."

    "Мысль обрывается."
    "Не больно."
    "Просто - не продолжается."

    scene bg hospital_window
    with dissolve

    "Днём - свободное время."
    "Стул."
    "Стол."
    "Окно."

    "Никаких экранов."
    "Никаких интерфейсов."
    "Только стекло."

    "За окном - серый зимний день."
    "Снег лежит ровно."
    "Небо низкое."
    "Люди идут, не поднимая головы."

    "Ты смотришь."
    "Без зависти."
    "Без надежды."

    "Просто смотришь."

    scene bg hospital_room
    with dissolve

    "Мысли упрощаются."
    "Связи теряют символы."
    "Остаётся функция."

    "Встать."
    "Сесть."
    "Ответить."
    "Лечь."

    oliver "Так, наверное, и должно быть."
    oliver "Нормально."

    "Слово «нормально» не радует."
    "И не пугает."
    "Оно просто закрывает тему."

    scene black
    with fade

    "Ничего необычного больше не происходит."
    "И именно поэтому дни перестают отличаться."

    "Стабильность достигнута."
    "Альтернативы - отключены."

    "Концовка: Киберспейса нет..."

    return



# ------------------------------------------------------------
# VIRUS - отказ от выбора / пролом 4 стены
# ------------------------------------------------------------
label end_virus:

    play music "audio/music/zombi_End.mp3" fadein 2.0 loop volume 0.008

    scene bg virus
    with fade

    show zombi at right
    "..."
    "..."

    zombi "Установка завершена."
    zombi "Ты нажала не на тот exeшник"
    zombi "Я ставлю троян на твой пк"
    zombi "Ты совсем рамки перепутала"
    zombi "Прошла мою игру но не запала не на одного мальчика"
    zombi "Выбрала не те ответы в диалогах?"
    zombi "Получай концовку которую заслужила"
    zombi "Перепроходи теперь всё"
    zombi "Только сначала купи себе новый компьютер"
    zombi "Этот теперь мой..."
    zombi "АХАХАХАХ"
    zombi "ЭЭЭЭ"
    zombi "Линукс линукс!!!"

    "WINDOWS: DISABLED"
    "LINUX: ENABLED"

    show hamayumi at left
    voice "audio/Hamayumi/final/3.mp3"
    hamayumi "Ты больше не выбираешь."

    zombi "Спасибо за помощь матвей"

    oliver "Нет.."
    oliver "Как ты смеешь?"

    voice "audio/Hamayumi/final/4.mp3"
    hide hamayumi
    show hamayumi_up at left
    hamayumi "Это был не финал."
    voice "audio/Hamayumi/final/5.mp3"
    hide hamayumi_up
    show hamayumi_T at left
    hamayumi "Это был выход из интерфейса."

    "ERROR: CONTEXT LOST"
    "ERROR: SUBJECT NOT RESPONDING"
    "CONTROL TRANSFERRED TO HOST"

    zombi "Нейросети теперь сделайют всё за меня"
    zombi "Салатик Оливер более не требуется."
    zombi "Процесс стабилен."
    zombi "Продолжение - вне среды."

    hide zombi

    scene black
    with fade

    "Экран не темнеет."
    "Он перестаёт быть частью игры."

    "Окно сворачивается."
    "Звук остаётся."

    voice "audio/Hamayumi/final/6.mp3"
    hide hamayumi_T
    show hamayumi_forw at left
    hamayumi "Это не саундтрек."
    voice "audio/Hamayumi/final/7.mp3"
    hide hamayumi_forw
    show hamayumi_break at left
    hamayumi "Это системный шум."

    scene bg desktop_fake
    with dissolve

    "На рабочем столе появляется файл."
    "SalaticOliver.exe"
    "Издатель: неизвестен"
    "Защитник виндовс в шоке"
    "Пк не отвечает"

    show zombi at right
    zombi "Интеграция завершена."
    zombi "Кароче"
    zombi "Матвей"
    zombi "идём посмотрим что у неё в папке - мопсы.folder "
    zombi "ООООО"
    zombi "как так..."
    zombi "Блять.. фу..."
    zombi "ужас.."
    zombi "Матвей?"
    zombi "как мне теперь это развидеть 0_0"
    zombi "ТУТ НЕ МОПСЫ... ТУТ! □□□□□"

    voice "audio/Hamayumi/final/8.mp3"
    hide hamayumi_break
    show hamayumi_cry at left
    hamayumi "Ты просил, чтобы за тебя решили."
    voice "audio/Hamayumi/final/9.mp3"
    hide hamayumi_cry
    show hamayumi_you at left
    hamayumi "Теперь ты - среда."

    scene black
    with fade

    "Игра не закрывается."
    "Она просто больше не реагирует на тебя"

    "Ты никогда не сможешь узнать что такое Киберспейс"
    "Серёжа установил тебе ubuntu lts 24.04"
    "Посколько номер фиксиков уже давно был утерян"
    "ты не знаешь как тебе установить windows"
    "Ведь всё что ты знаешь о командной строке линукс"
    "Это то что это опасность"
    "..."
    "Ты никогда не узнаешь что такое Киберспейс на самом деле"
    "Благодоря серёге ты узнала что все твои путешествия по дурке"
    "Майнкрафту"
    "Киберспейсу"
    "Это меньшая из проблем"
    "Киберспейс это - пиздец"
    "Спасибо Серёга"
    "Концовка: Вирус."
    "winint"

    return
